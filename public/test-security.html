<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test: Firebase Security Rules</title>
    <meta name="description" content="Test Firebase Security Rules and validation">

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth-compat.js"></script>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../src/styles.css">

    <!-- Security Services -->
    <script src="../src/input-validator.js"></script>
    <script src="../src/rate-limiter.js"></script>

    <!-- Firebase Configuration (embedded) -->
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBL8Juo6PJQtFJx1KoJU7KGlc_OndCF3Ls",
            authDomain: "esplanada-eats.firebaseapp.com",
            projectId: "esplanada-eats",
            storageBucket: "esplanada-eats.firebasestorage.app",
            messagingSenderId: "403394772779",
            appId: "1:403394772779:web:8db461c61fc21f9e418f6e"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        // Initialize services
        const db = firebase.firestore();
        const storage = firebase.storage();
        const auth = firebase.auth();

        // Database references
        const restaurantsRef = db.collection('restaurants');
        const reviewsRef = db.collection('reviews');
        const userTrackingRef = db.collection('userTracking');
        const rateLimitsRef = db.collection('rateLimits');

        // Global variables
        let currentUser = null;
        let testResults = [];

        // Initialize Firebase Authentication with error handling
        try {
            auth.onAuthStateChanged((user) => {
                currentUser = user;
                updateAuthStatus();
            });
        } catch (error) {
            console.error('Firebase Authentication error:', error);
            // Show auth configuration error
            document.getElementById('auth-status').className = 'alert alert-danger';
            document.getElementById('auth-status').textContent = 'âŒ Firebase Authentication nÃ£o configurado';
            document.getElementById('user-info').textContent = 'Erro: ' + error.message;
        }

        // Update authentication status
        function updateAuthStatus() {
            const authStatus = document.getElementById('auth-status');
            const userInfo = document.getElementById('user-info');

            if (currentUser) {
                authStatus.className = 'alert alert-success';
                authStatus.textContent = 'âœ… Autenticado';
                userInfo.textContent = `UsuÃ¡rio: ${currentUser.email || currentUser.uid}`;
            } else {
                authStatus.className = 'alert alert-warning';
                authStatus.textContent = 'âš ï¸ NÃ£o autenticado';
                userInfo.textContent = 'Visitante anÃ´nimo';
            }
        }

        // Check if Firebase Authentication is enabled
        async function checkAuthConfiguration() {
            try {
                // Try to call an auth method to check if it's configured
                await auth.getRedirectResult();
                return true;
            } catch (error) {
                return !error.message.includes('configuration-not-found');
            }
        }

        // Check if security rules are deployed
        async function checkSecurityRulesDeployment() {
            try {
                // Try to write to a collection that should be restricted
                await db.collection('rateLimits').add({
                    test: true,
                    timestamp: Date.now()
                });
                return false; // If this succeeds, rules are not properly deployed
            } catch (error) {
                // If this fails with permission error, rules are working
                return error.message.includes('permission-denied') ||
                       error.message.includes('PERMISSION_DENIED');
            }
        }

        // Test result logging
        function addTestResult(test, result, details = '') {
            const testResult = {
                test,
                result,
                details,
                timestamp: new Date().toISOString()
            };

            testResults.push(testResult);

            const container = document.getElementById('test-results');
            const resultDiv = document.createElement('div');
            resultDiv.className = `alert ${result === 'success' ? 'alert-success' : 'alert-danger'} mb-2`;
            resultDiv.innerHTML = `
                <div class="d-flex justify-content-between">
                    <div>
                        <strong>${test}</strong>
                        ${details ? `<br><small>${details}</small>` : ''}
                    </div>
                    <div class="text-end">
                        <small>${new Date().toLocaleTimeString()}</small>
                    </div>
                </div>
            `;

            container.insertBefore(resultDiv, container.firstChild);

            // Keep only last 10 results
            while (container.children.length > 10) {
                container.removeChild(container.lastChild);
            }
        }

        // Restaurant Security Tests
        async function testRestaurantSecurity() {
            addTestResult('ğŸ½ï¸ Teste de SeguranÃ§a - Restaurantes', 'info', 'Iniciando testes...');

            // Test 1: Public read access
            try {
                const snapshot = await restaurantsRef.limit(1).get();
                addTestResult('ğŸ“– Leitura pÃºblica de restaurantes', 'success', `Pode ler ${snapshot.size} restaurantes`);
            } catch (error) {
                addTestResult('ğŸ“– Leitura pÃºblica de restaurantes', 'error', error.message);
            }

            // Test 2: Create without authentication
            try {
                await restaurantsRef.add({
                    name: 'Test Restaurant Security',
                    averageQuality: 0,
                    totalRatings: 0,
                    price: 'R$ 30-50',
                    hours: '12h00-23h00',
                    vegetarianOptions: 'Algumas',
                    access: 'Simples',
                    description: 'Test restaurant for security validation - should fail without auth',
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                addTestResult('ğŸš« Criar restaurante sem autenticaÃ§Ã£o', 'error', 'Deveria falhar mas teve sucesso! (Regras nÃ£o estÃ£o ativas)');
            } catch (error) {
                addTestResult('ğŸš« Criar restaurante sem autenticaÃ§Ã£o', 'success', 'Corretamente bloqueado: ' + error.message);
            }

            // Test 3: Create with authentication
            if (currentUser) {
                try {
                    const docRef = await restaurantsRef.add({
                        name: 'Security Test Restaurant Authenticated',
                        averageQuality: 0,
                        totalRatings: 0,
                        price: 'R$ 30-50',
                        hours: '12h00-23h00',
                        vegetarianOptions: 'Algumas',
                        access: 'Simples',
                        description: 'Test restaurant for security validation - authenticated',
                        ownerId: currentUser.uid,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    addTestResult('âœ… Criar restaurante com autenticaÃ§Ã£o', 'success', `ID: ${docRef.id}`);
                } catch (error) {
                    addTestResult('âœ… Criar restaurante com autenticaÃ§Ã£o', 'error', error.message);
                }
            } else {
                addTestResult('âœ… Criar restaurante com autenticaÃ§Ã£o', 'info', 'UsuÃ¡rio nÃ£o autenticado - teste pulado');
            }
        }

        // Review Security Tests
        async function testReviewSecurity() {
            addTestResult('â­ Teste de SeguranÃ§a - AvaliaÃ§Ãµes', 'info', 'Iniciando testes...');

            // Test 1: Public read access
            try {
                const snapshot = await reviewsRef.limit(1).get();
                addTestResult('ğŸ“– Leitura pÃºblica de avaliaÃ§Ãµes', 'success', `Pode ler ${snapshot.size} avaliaÃ§Ãµes`);
            } catch (error) {
                addTestResult('ğŸ“– Leitura pÃºblica de avaliaÃ§Ãµes', 'error', error.message);
            }

            // Test 2: Create without authentication
            try {
                await reviewsRef.add({
                    restaurantId: 'test-restaurant-security-id',
                    quality: 5,
                    price: 4,
                    userName: 'Test User Security',
                    userFingerprint: 'test-fingerprint-security',
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                addTestResult('ğŸš« Criar avaliaÃ§Ã£o sem autenticaÃ§Ã£o', 'error', 'Deveria falhar mas teve sucesso! (Regras nÃ£o estÃ£o ativas)');
            } catch (error) {
                addTestResult('ğŸš« Criar avaliaÃ§Ã£o sem autenticaÃ§Ã£o', 'success', 'Corretamente bloqueado: ' + error.message);
            }

            // Test 3: Create with authentication
            if (currentUser) {
                try {
                    const docRef = await reviewsRef.add({
                        restaurantId: 'test-restaurant-security-id',
                        quality: 5,
                        price: 4,
                        userName: 'Test User Authenticated',
                        userFingerprint: 'test-fingerprint-auth-' + Date.now(),
                        userId: currentUser.uid,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    addTestResult('âœ… Criar avaliaÃ§Ã£o com autenticaÃ§Ã£o', 'success', `ID: ${docRef.id}`);
                } catch (error) {
                    addTestResult('âœ… Criar avaliaÃ§Ã£o com autenticaÃ§Ã£o', 'error', error.message);
                }
            } else {
                addTestResult('âœ… Criar avaliaÃ§Ã£o com autenticaÃ§Ã£o', 'info', 'UsuÃ¡rio nÃ£o autenticado - teste pulado');
            }
        }

        // User Tracking Security Tests
        async function testUserTrackingSecurity() {
            addTestResult('ğŸ‘¤ Teste de SeguranÃ§a - Rastreamento', 'info', 'Iniciando testes...');

            const testFingerprint = 'test-security-fingerprint';

            // Test 1: Read without authentication
            try {
                const snapshot = await userTrackingRef
                    .where('userFingerprint', '==', testFingerprint)
                    .get();
                addTestResult('ğŸš« Ler rastreamento sem autenticaÃ§Ã£o', 'error', `Deveria falhar mas leu ${snapshot.size} registros`);
            } catch (error) {
                addTestResult('ğŸš« Ler rastreamento sem autenticaÃ§Ã£o', 'success', 'Corretamente bloqueado');
            }

            // Test 2: Create tracking data
            try {
                const docRef = await userTrackingRef.add({
                    userFingerprint: testFingerprint,
                    restaurantId: 'test-restaurant-id',
                    hasReviewed: false,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                addTestResult('ğŸ“ Criar rastreamento', 'success', `ID: ${docRef.id}`);
            } catch (error) {
                addTestResult('ğŸ“ Criar rastreamento', 'error', error.message);
            }
        }

        // Rate Limiting Tests
        async function testRateLimiting() {
            addTestResult('âš¡ Teste de Rate Limiting', 'info', 'Iniciando testes...');

            if (!window.EsplanadaEatsRateLimiter) {
                addTestResult('âŒ Rate Limiter nÃ£o disponÃ­vel', 'error', 'Service not loaded');
                return;
            }

            const testFingerprint = 'test-rate-limit-fingerprint';

            try {
                // Test 1: Check initial limit
                const remaining = window.EsplanadaEatsRateLimiter.getRemainingActions(testFingerprint, 'reviewSubmission');
                addTestResult('ğŸ“Š Verificar limite inicial', 'success', `AvaliaÃ§Ãµes restantes: ${remaining}`);

                // Test 2: Use up some limits
                for (let i = 0; i < 3; i++) {
                    await window.EsplanadaEatsRateLimiter.checkRateLimit(testFingerprint, 'reviewSubmission');
                }

                const newRemaining = window.EsplanadaEatsRateLimiter.getRemainingActions(testFingerprint, 'reviewSubmission');
                addTestResult('ğŸ“Š ApÃ³s 3 aÃ§Ãµes', 'success', `AvaliaÃ§Ãµes restantes: ${newRemaining}`);

                // Test 3: Check stats
                const stats = window.EsplanadaEatsRateLimiter.getStats(testFingerprint);
                addTestResult('ğŸ“ˆ EstatÃ­sticas', 'success', `Stats carregadas para ${Object.keys(stats).length} aÃ§Ãµes`);

            } catch (error) {
                addTestResult('âŒ Teste de rate limiting', 'error', error.message);
            }
        }

        // Input Validation Tests
        async function testInputValidation() {
            addTestResult('ğŸ” Teste de ValidaÃ§Ã£o de Input', 'info', 'Iniciando testes...');

            if (!window.EsplanadaEatsValidator) {
                addTestResult('âŒ Validador nÃ£o disponÃ­vel', 'error', 'Service not loaded');
                return;
            }

            // Test 1: Valid restaurant
            const validRestaurant = {
                name: 'Test Restaurant',
                price: 'R$ 30-50',
                hours: '12h00-23h00',
                vegetarianOptions: 'Algumas',
                access: 'Simples',
                description: 'A test restaurant for validation',
                averageQuality: 4.5
            };

            const restaurantValidation = window.EsplanadaEatsValidator.validateRestaurant(validRestaurant);
            addTestResult('âœ… Restaurante vÃ¡lido', restaurantValidation.isValid ? 'success' : 'error',
                restaurantValidation.isValid ? 'ValidaÃ§Ã£o passou' : restaurantValidation.errors.join(', '));

            // Test 2: Invalid restaurant (short name)
            const invalidRestaurant = { ...validRestaurant, name: 'ABC' };
            const invalidValidation = window.EsplanadaEatsValidator.validateRestaurant(invalidRestaurant);
            addTestResult('âŒ Restaurante invÃ¡lido', !invalidValidation.isValid ? 'success' : 'error',
                invalidValidation.isValid ? 'Deveria falhar' : invalidValidation.errors.join(', '));

            // Test 3: Valid review
            const validReview = {
                restaurantId: 'test-restaurant-id',
                quality: 4.5,
                price: 4,
                userName: 'Test User',
                userFingerprint: 'test-fingerprint-123'
            };

            const reviewValidation = window.EsplanadaEatsValidator.validateReview(validReview);
            addTestResult('âœ… AvaliaÃ§Ã£o vÃ¡lida', reviewValidation.isValid ? 'success' : 'error',
                reviewValidation.isValid ? 'ValidaÃ§Ã£o passou' : reviewValidation.errors.join(', '));

            // Test 4: Invalid review (invalid rating)
            const invalidReview = { ...validReview, quality: 6 };
            const invalidReviewValidation = window.EsplanadaEatsValidator.validateReview(invalidReview);
            addTestResult('âŒ AvaliaÃ§Ã£o invÃ¡lida', !invalidReviewValidation.isValid ? 'success' : 'error',
                invalidReviewValidation.isValid ? 'Deveria falhar' : invalidReviewValidation.errors.join(', '));
        }

        // Storage Security Tests
        async function testStorageSecurity() {
            addTestResult('ğŸ“ Teste de SeguranÃ§a - Storage', 'info', 'Iniciando testes...');

            // Test file validation
            if (!window.EsplanadaEatsValidator) {
                addTestResult('âŒ Validador nÃ£o disponÃ­vel', 'error', 'Service not loaded');
                return;
            }

            // Test 1: Valid image file
            const validFile = new File(['test'], 'test.jpg', { type: 'image/jpeg' });
            const validImageValidation = window.EsplanadaEatsValidator.validateImage(validFile);
            addTestResult('âœ… Imagem vÃ¡lida', validImageValidation.isValid ? 'success' : 'error',
                validImageValidation.isValid ? 'ValidaÃ§Ã£o passou' : validImageValidation.errors.join(', '));

            // Test 2: Invalid file type
            const invalidFile = new File(['test'], 'test.txt', { type: 'text/plain' });
            const invalidFileValidation = window.EsplanadaEatsValidator.validateImage(invalidFile);
            addTestResult('âŒ Arquivo invÃ¡lido', !invalidFileValidation.isValid ? 'success' : 'error',
                invalidFileValidation.isValid ? 'Deveria falhar' : invalidFileValidation.errors.join(', '));
        }

        // Run all tests
        async function runAllTests() {
            document.getElementById('test-results').innerHTML = '';
            testResults = [];

            addTestResult('ğŸ§ª Iniciando Todos os Testes de SeguranÃ§a', 'info', 'Firebase Security Rules Test Suite');

            // Check if Firebase Authentication is enabled
            const authEnabled = await checkAuthConfiguration();
            if (authEnabled) {
                addTestResult('ğŸ” Status da AutenticaÃ§Ã£o', 'success', 'Firebase Authentication estÃ¡ habilitado');
            } else {
                addTestResult('ğŸ” Status da AutenticaÃ§Ã£o', 'error', 'Firebase Authentication NÃƒO estÃ¡ habilitado');
                addTestResult('ğŸ”§ AÃ§Ã£o NecessÃ¡ria', 'info', 'Habilite Authentication no Firebase Console â†’ Authentication');
            }

            // Check if security rules are deployed
            const rulesDeployed = await checkSecurityRulesDeployment();
            if (rulesDeployed) {
                addTestResult('ğŸ”’ Status das Regras de SeguranÃ§a', 'success', 'Regras de seguranÃ§a estÃ£o ativas');
            } else {
                addTestResult('ğŸ”’ Status das Regras de SeguranÃ§a', 'error', 'Regras de seguranÃ§a NÃƒO estÃ£o ativas - Firebase estÃ¡ em modo de teste');
            }

            await testRestaurantSecurity();
            await new Promise(resolve => setTimeout(resolve, 500));

            await testReviewSecurity();
            await new Promise(resolve => setTimeout(resolve, 500));

            await testUserTrackingSecurity();
            await new Promise(resolve => setTimeout(resolve, 500));

            await testRateLimiting();
            await new Promise(resolve => setTimeout(resolve, 500));

            await testInputValidation();
            await new Promise(resolve => setTimeout(resolve, 500));

            await testStorageSecurity();

            addTestResult('âœ… Todos os Testes ConcluÃ­dos', 'success', `Executados ${testResults.length} testes`);
        }

        // Authentication functions
        async function signInAnonymously() {
            try {
                const result = await auth.signInAnonymously();
                addTestResult('ğŸ”“ Login anÃ´nimo', 'success', `UID: ${result.user.uid}`);
            } catch (error) {
                if (error.message.includes('configuration-not-found')) {
                    addTestResult('ğŸ”“ Login anÃ´nimo', 'error', 'Firebase Authentication nÃ£o estÃ¡ habilitado no projeto');
                    addTestResult('ğŸ”§ SoluÃ§Ã£o', 'info', 'Habilite Firebase Authentication no Firebase Console');
                } else {
                    addTestResult('ğŸ”“ Login anÃ´nimo', 'error', error.message);
                }
            }
        }

        async function signOut() {
            try {
                await auth.signOut();
                addTestResult('ğŸ”’ Logout', 'success', 'Desconectado com sucesso');
            } catch (error) {
                addTestResult('ğŸ”’ Logout', 'error', error.message);
            }
        }

        // Show deployment guide
        function showDeploymentGuide() {
            const guide = `
ğŸ”¥ FIBASE SECURITY RULES DEPLOYMENT GUIDE ğŸ”¥

ğŸš¨ CURRENT STATUS: Security rules are NOT deployed yet!

ğŸ“‹ STEPS TO DEPLOY:

1ï¸âƒ£ Deploy Firestore Rules:
   firebase deploy --only firestore:rules

2ï¸âƒ£ Deploy Storage Rules:
   firebase deploy --only storage:rules

OR use automated script:
   ./deploy-security-rules.sh

ğŸ“ REQUIRED FILES:
âœ… firestore.rules (already created)
âœ… storage.rules (already created)
âœ… deploy-security-rules.sh (ready to use)

ğŸ§ª AFTER DEPLOYMENT:
âœ… Unauthenticated writes will be blocked
âœ… All validation rules will be enforced
âœ… Rate limiting will be active
âœ… File upload restrictions will work

ğŸ¯ EXPECTED TEST RESULTS:
âœ… Firebase Authentication estÃ¡ habilitado
âœ… Regras de seguranÃ§a estÃ£o ativas
âœ… ğŸš« Criar restaurante sem autenticaÃ§Ã£o: Corretamente bloqueado
âœ… ğŸš« Criar avaliaÃ§Ã£o sem autenticaÃ§Ã£o: Corretamente bloqueado
            `;
            alert(guide);
        }

        // Generate test report
        function generateReport() {
            const successCount = testResults.filter(r => r.result === 'success').length;
            const errorCount = testResults.filter(r => r.result === 'error').length;
            const infoCount = testResults.filter(r => r.result === 'info').length;

            const report = `
=== Firebase Security Rules Test Report ===
Data: ${new Date().toLocaleString()}
Total de Testes: ${testResults.length}
Sucessos: ${successCount}
Falhas: ${errorCount}
InformaÃ§Ãµes: ${infoCount}

Resultados Detalhados:
${testResults.map(r => `[${r.result.toUpperCase()}] ${r.test}: ${r.details || ''}`).join('\n')}
            `;

            const blob = new Blob([report], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `security-test-report-${Date.now()}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // Initialize on page load
        window.addEventListener('load', () => {
            console.log('ğŸ”’ Security test page loaded');
            updateAuthStatus();
        });

        console.log('ğŸ”’ Firebase Security Rules Test Script Loaded');
    </script>
</head>
<body>
    <div class="container">
        <header class="text-center py-4">
            <h1>ğŸ”’ Test: Firebase Security Rules</h1>
            <p class="lead">Test comprehensive Firebase Security Rules and validation</p>
        </header>

        <!-- Authentication & Security Status -->
        <div class="mb-4">
            <div id="auth-status" class="alert alert-info text-center">
                ğŸ” Verificando autenticaÃ§Ã£o...
            </div>
            <div id="security-status" class="alert alert-warning text-center" style="display: none;">
                ğŸ”’ Verificando regras de seguranÃ§a...
            </div>
            <div id="user-info" class="text-center text-muted small"></div>
            <div class="text-center mt-2">
                <button class="btn btn-primary btn-sm me-2" onclick="signInAnonymously()">ğŸ”“ Login AnÃ´nimo</button>
                <button class="btn btn-secondary btn-sm" onclick="signOut()">ğŸ”’ Logout</button>
                <button class="btn btn-warning btn-sm ms-2" onclick="showDeploymentGuide()">ğŸ“‹ Guia de ImplantaÃ§Ã£o</button>
            </div>
        </div>

        <main>
            <!-- Test Controls -->
            <section class="my-4">
                <div class="card">
                    <div class="card-header">
                        <h5>ğŸ§ª Controles de Teste</h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-2">
                            <div class="col-md-4">
                                <button class="btn btn-primary w-100" onclick="testRestaurantSecurity()">ğŸ½ï¸ Restaurantes</button>
                            </div>
                            <div class="col-md-4">
                                <button class="btn btn-primary w-100" onclick="testReviewSecurity()">â­ AvaliaÃ§Ãµes</button>
                            </div>
                            <div class="col-md-4">
                                <button class="btn btn-primary w-100" onclick="testUserTrackingSecurity()">ğŸ‘¤ Rastreamento</button>
                            </div>
                            <div class="col-md-4">
                                <button class="btn btn-primary w-100" onclick="testRateLimiting()">âš¡ Rate Limiting</button>
                            </div>
                            <div class="col-md-4">
                                <button class="btn btn-primary w-100" onclick="testInputValidation()">ğŸ” ValidaÃ§Ã£o</button>
                            </div>
                            <div class="col-md-4">
                                <button class="btn btn-primary w-100" onclick="testStorageSecurity()">ğŸ“ Storage</button>
                            </div>
                        </div>
                        <hr>
                        <div class="row g-2">
                            <div class="col-md-6">
                                <button class="btn btn-success w-100" onclick="runAllTests()">ğŸš€ Executar Todos os Testes</button>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-outline-secondary w-100" onclick="generateReport()">ğŸ“„ Gerar RelatÃ³rio</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Test Results -->
            <section class="my-4">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5>ğŸ“Š Resultados dos Testes</h5>
                        <span class="badge bg-primary" id="test-count">0 testes</span>
                    </div>
                    <div class="card-body">
                        <div id="test-results" style="max-height: 500px; overflow-y: auto;">
                            <div class="text-center text-muted">
                                Clique em "Executar Todos os Testes" para comeÃ§ar
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Security Rules Summary -->
            <section class="my-4">
                <div class="card">
                    <div class="card-header">
                        <h5>ğŸ“‹ Resumo das Regras de SeguranÃ§a</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6>ğŸ½ï¸ Restaurantes</h6>
                                <ul>
                                    <li>âœ… Leitura pÃºblica</li>
                                    <li>ğŸ”’ CriaÃ§Ã£o requer autenticaÃ§Ã£o</li>
                                    <li>ğŸ”’ AtualizaÃ§Ã£o apenas pelo dono</li>
                                    <li>ğŸ”’ ExclusÃ£o apenas pelo dono</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6>â­ AvaliaÃ§Ãµes</h6>
                                <ul>
                                    <li>âœ… Leitura pÃºblica</li>
                                    <li>ğŸ”’ CriaÃ§Ã£o requer autenticaÃ§Ã£o</li>
                                    <li>ğŸ”’ AtualizaÃ§Ã£o apenas pelo autor</li>
                                    <li>ğŸ”’ ExclusÃ£o apenas pelo autor</li>
                                </ul>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <h6>ğŸ‘¤ Rastreamento</h6>
                                <ul>
                                    <li>ğŸ”’ Acesso apenas pelo usuÃ¡rio</li>
                                    <li>ğŸ”’ CriaÃ§Ã£o/AtualizaÃ§Ã£o controlada</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6>ğŸ“ Storage</h6>
                                <ul>
                                    <li>âœ… Leitura pÃºblica de imagens</li>
                                    <li>ğŸ”’ Upload requer autenticaÃ§Ã£o</li>
                                    <li>ğŸ”’ ValidaÃ§Ã£o de arquivos</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>
</body>
</html>