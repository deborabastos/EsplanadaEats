<!DOCTYPE html>
<html>
<head>
    <title>Performance Monitor Test</title>
</head>
<body>
    <div id="test">Testing Performance Monitor...</div>

    <script type="module">
        // Mock browser APIs that PerformanceMonitor needs
        window.performance = {
            now: () => Date.now(),
            mark: () => {},
            measure: () => {},
            getEntriesByType: () => [],
            getEntriesByName: () => []
        };

        window.requestAnimationFrame = (cb) => setTimeout(cb, 16);
        window.PerformanceObserver = class {
            constructor() {}
            observe() {}
        };

        console.log('üß™ Testing Performance Monitor initialization...');

        try {
            import('./js/services/performance-monitor.js').then(module => {
                console.log('‚úÖ Performance monitor module loaded');

                const monitor = new module.PerformanceMonitor();
                console.log('‚úÖ Performance monitor instantiated successfully');

                // Test the problematic setupCardRenderMonitoring method
                monitor.setupCardRenderMonitoring();
                console.log('‚úÖ setupCardRenderMonitoring completed without errors');

                document.getElementById('test').innerHTML = '‚úÖ All tests passed! Performance Monitor is working correctly.';
                document.getElementById('test').style.color = 'green';

            }).catch(err => {
                console.error('‚ùå Error:', err);
                document.getElementById('test').innerHTML = `‚ùå Error: ${err.message}`;
                document.getElementById('test').style.color = 'red';
            });
        } catch (err) {
            console.error('‚ùå Import error:', err);
            document.getElementById('test').innerHTML = `‚ùå Import error: ${err.message}`;
            document.getElementById('test').style.color = 'red';
        }
    </script>
</body>
</html>